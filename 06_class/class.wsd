@startuml hoge

package domain {
    package User {
        class UserEntity {
            Id: Guid
            +GetMe()
            +Create()
        }

        interface IUserRepository {
            +GetMe()
            +Save()
        }

        class DisplaySettings {
            BodyPartId: Guid
            Display: Boolean
        }
    }

    package Cracking {
        class BodyPartEntity {
            Id: Guid
            Name: BodyPartName
            +ChangeName(BodyPartName name)
        }
        class BodyPartName {
            Value: String
        }
        class Count {
            +Value: int
        }
        class CrackingCounterEntity {
            Id: Guid
            UserId: Guid
            BodyPart: BodyPart
            TotalCount: Count
            TodayCount: Count
            Descendent:  List<CrackingCounterEntity>
            +Increment()
        }
        class CrackingCounters {
            CrackingCounters: List<CrackingCounterEntity>
            +Create()
        }
        interface ICrackingCounterRepository {
            +Get(Guid id)
            +GetAll()
            +Save(CrackingCounterEntity entity)
        }
    }
    
}

package application {
    class CrackingCounterService {
            +GetCrackingCounters()
            +Increment(Guid id)
            +GetHourly(DateTime day)
            +GetWeekly(DateTime startDay, DateTime endDay)
            +GetMonthly(DateTime month)
            +GetYearly(DateTime year)
            +GetTotal(Guid id)
            +GetToday(Guid id)
        }
}

package presentation {
    class RegisterViewModel {
        CrackingCounters: CrackingCounters
        +Increment(Guid id)
        -UpdateList()
    }
}

UserEntity *-- DisplaySettings
UserEntity - IUserRepository
BodyPartEntity - DisplaySettings
BodyPartName - BodyPartEntity
CrackingCounterEntity - Count
CrackingCounters *-- CrackingCounterEntity
CrackingCounterEntity -- BodyPartEntity
ICrackingCounterRepository - CrackingCounterEntity
CrackingCounterService - CrackingCounters
RegisterViewModel -- CrackingCounters
RegisterViewModel -- CrackingCounterService
CrackingCounterService -- ICrackingCounterRepository
CrackingCounters -- ICrackingCounterRepository
CrackingCounterService -- CrackingCounterEntity

@enduml